<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README.rdoc</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README.rdoc</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README.rdoc
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Fri Jul 09 19:18:53 +0200 2010</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1><a href="../classes/Beetle.html">Beetle</a></h1>
<p>
High Availability AMQP Messaging with Redundant Queues
</p>
<h2>About</h2>
<p>
<a href="../classes/Beetle.html">Beetle</a> grew out of a project to
improve an existing ActiveMQ based messaging infrastructure. It offers the
following features:
</p>
<ul>
<li>High Availability (by using multiple message broker instances)

</li>
<li>Redundancy (by replicating queues)

</li>
<li>Simple client API (by encapsulating the publishing/ deduplication logic)

</li>
</ul>
<p>
More information can be found on the <a
href="http://xing.github.com/beetle">project website</a>.
</p>
<h2>Usage</h2>
<h3>Configuration</h3>
<pre>
    # configure machines

    Beetle.config do |config|
      config.servers = &quot;broker1:5672, broker2:5672&quot;
      config.redis_server = &quot;redis1:6379&quot;
    end

    # instantiate a beetle client

    b = Beetle::Client.new

    # configure exchanges, queues, bindings, messages and handlers

    b.configure do |config|
      config.queue :test
      config.message :test
      config.handler(:test) { |message| puts message.data }
    end
</pre>
<h3>Publishing</h3>
<pre>
    b.publish :test, &quot;I'm a test message&quot;
</pre>
<h3>Subscribing</h3>
<pre>
    b.listen
</pre>
<h3>Examples</h3>
<p>
<a href="../classes/Beetle.html">Beetle</a> ships with a number of <a
href="http://github.com/xing/beetle/tree/master/examples/">example
scripts</a>.
</p>
<p>
The top level Rakefile comes with targets to start several RabbitMQ and
redis instances locally. Make sure the corresponding binaries are in your
search path. Open four new shell windows and execute the following
commands:
</p>
<pre>
    rake rabbit:start1
    rake rabbit:start2
    rake redis:start1
    rake redis:start2
</pre>
<h2>Prerequisites</h2>
<p>
To set up a redundant messaging system you will need
</p>
<ul>
<li>at least 2 AMQP servers (we use <a
href="http://www.rabbitmq.com/">RabbitMQ</a>)

</li>
<li>at least one Redis server (better are two in a master/slave setup)

</li>
</ul>
<h2>Gem Dependencies</h2>
<p>
At runtime, <a href="../classes/Beetle.html">Beetle</a> will use
</p>
<ul>
<li><a href="http://github.com/skaes/uuid4r">uuid4r</a> (which needs ossp-uuid)

</li>
<li><a href="http://github.com/celldee/bunny">bunny</a>

</li>
<li><a href="http://github.com/ezmobius/redis-rb">redis-rb</a> (which needs <a
href="http://github.com/antirez/redis">redis</a>)

</li>
<li><a href="http://github.com/tmm1/amqp">amqp</a> (which is based on <a
href="http://github.com/eventmachine/eventmachine">eventmachine</a>)

</li>
<li>activesupport

</li>
</ul>
<p>
For development, you&#8216;ll need
</p>
<ul>
<li>mocha

</li>
<li>rcov

</li>
</ul>
<h2>Authors</h2>
<p>
<a href="http://github.com/skaes">Stefan Kaes</a>, <a
href="http://github.com/paukul">Pascal Friederich</a>, <a
href="http://github.com/dudemeister">Ali Jelveh</a> and <a
href="http://github.com/boosty">Sebastian Roebke</a>.
</p>
<p>
You cand find out more about our work on our <a
href="http://devblog.xing.com">dev blog</a>.
</p>
<p>
Copyright (c) 2010 <a href="http://www.xing.com/">XING AG</a>
</p>
<p>
Released under the MIT license. For full details see MIT-LICENSE included
in this distribution.
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>